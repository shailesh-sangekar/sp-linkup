<!--Third Party-->
<script src="/SiteAssets/Files/angular.js"></script>

<!--Application-->
<script src="/SiteAssets/Files/spcrud.js"></script>
<link rel="stylesheet" href="/SiteAssets/ManageTicket/AllTicket.css"></link>
<script src="/SiteAssets/ManageTicket/AllTicket.js"></script>

<div ng-app="AllTicketApp" class="appmodel">
    <div ng-controller="AllTicketCtl">
        <div class="spinner" ng-hide="spinnerloaded"></div>
        <span ng-hide="spinnerloaded">
				Loading.....
			</span>
        <div ng-cloak="" ng-show="spinnerloaded">
            <div class="row" ng-if="Authorised">
                <div class="col-md-12">
                    <h4 class="masterHeading">Manage Ticket</h4>
                    <div class="scrollTable" style="margin-top: 25px;">
                        <table class="table table-striped table-bordered table-hover table-checkable order-column">
                            <thead>
                                <tr>
                                    <th>Raised By</th>
                                    <th>Department</th>
                                    <th>Concern</th>
                                    <th>Status</th>
                                    <th>Priority</th>
                                    <th>Created</th>
                                    <th>Updated</th>
                                    <th>Updated By</th>
                                    <th>Resolved By</th>
                                    <th>Age Days</th>
                                    <!--<th>Approvers Comment</th>-->
                                    <th>View</th>
                                    <th>Reply</th>
                                    <th>Resolve</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in pagedItems[currentPage]">
                                    <td>{{item.Employee.Title}}</td>
                                    <td>{{item.Department.Department}}</td>
                                    <td>{{item.Actual_x0020_Concern}}</td>
                                    <td>{{item.FinalStatus?item.FinalStatus:'N/A'}}</td>
                                    <td>{{item.Priority}}</td>
                                    <td><span ng-bind="item.Created | date:'dd/MM/yyyy'"></span></td>
                                    <td><span ng-bind="item.Modified | date:'dd/MM/yyyy'"></span></td>
                                    <td>{{item.Editor.Title}}</td>
                                    <td>{{item.ResolvedBy?item.ResolvedBy:'N/A'}}</td>
                                    <td>{{item.ageDiff}}</td>
                                    <!--<td>{{item.Approver_x0020_comment}}</td>-->
                                    <td>View</td>
                                    <td>Reply</td>
                                    <td>Resolve</td>
                                </tr>
                                <tr class="pagination pull-right">


                                    <td ng-class="{disabled: currentPage == 0}">
                                        <a href ng-click="prevPage()">« Prev</a>
                                    </td>
                                    <td ng-repeat="n in range(pagedItems.length)" ng-class="{active: n == currentPage}" ng-click="setPage()">
                                        <a href ng-bind="n + 1">1</a>
                                    </td>
                                    <td ng-class="{disabled: currentPage == pagedItems.length - 1}">
                                        <a href ng-click="nextPage()">Next »</a>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div ng-if="NotAuthorised">
                <b>You are not authorised user for this page.</b>
            </div>
        </div>
    </div>
</div>